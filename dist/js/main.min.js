document.addEventListener("DOMContentLoaded",function(){function e(e,t,n,r){this.name=e,this.posX=t,this.posY=n,this.colour=r}function t(e){var t=window.getComputedStyle(e.target,null);s=[e.target.id,parseInt(t.getPropertyValue("left"),10)-e.clientX,parseInt(t.getPropertyValue("top"),10)-e.clientY],e.dataTransfer.setData("text/plain",s)}function n(e){var t=document.getElementById(s[0]);return t.style.left=100*(e.clientX+parseInt(s[1],10))/d+"%",t.style.top=100*(e.clientY+parseInt(s[2],10))/u+"%",e.preventDefault(),!1}function r(e){var t=document.getElementById(s[0]);t.style.left=100*(e.clientX+parseInt(s[1],10))/d+"%",t.style.top=100*(e.clientY+parseInt(s[2],10))/u+"%";for(var n=0;n<i.length;n++)i[n].name==s[0]&&(i[n].posX=t.style.left,i[n].posY=t.style.top,i[n].colour=t.dataset.colour,console.log(i[n].getInfo()));return o(),a(),e.preventDefault(),!1}function o(){for(var e=[],t=0;t<i.length;t++)e.push("radial-gradient(circle at "+i[t].posX+" "+i[t].posY+", "+i[t].colour+", transparent 100%)");e.push("radial-gradient(circle at 50% 50%, #000, #000 100%)"),l.style.background=e.toString()}function a(){for(var e=document.getElementById("coords"),t=0;t<i.length;t++){var n=e.insertRow(0),r=n.insertCell(0),o=n.insertCell(1),a=n.insertCell(2);r.innerHTML=i[t].name,o.innerHTML=i[t].posX,a.innerHTML=i[t].posY}}var s,l=document.getElementById("div"),i=[],d=l.offsetWidth,u=l.offsetHeight,c=document.getElementById("add_point"),p=document.getElementById("set_colour");[].forEach.call(document.querySelectorAll(".dragme"),function(n){n.addEventListener("dragstart",t,!1),i.push(new e(n.id,n.offsetLeft+"px",n.offsetTop+"px","green"))}),e.prototype.getInfo=function(){return this.name+" ("+this.posX+","+this.posY+") - "+this.colour},window.onresize=function(){d=l.offsetWidth,u=l.offsetHeight},c.onclick=function(){var n=document.createElement("span");n.setAttribute("draggable","true");var r=i[i.length-1].name;r=r.replace("d",""),newN=parseInt(r)+1,n.setAttribute("id","d"+newN),n.setAttribute("class","dragme");var o=""!=p.value?p.value:"blue";n.setAttribute("data-colour",o),l.appendChild(n),n.addEventListener("dragstart",t,!1),i.push(new e(n.id,n.offsetLeft+"px",n.offsetTop+"px","green"))},l.addEventListener("dragover",n,!1),l.addEventListener("drop",r,!1)});