document.addEventListener("DOMContentLoaded",function(){function t(t,e,n,r){this.name=t,this.posX=e,this.posY=n,this.colour=r}function e(t){var e=window.getComputedStyle(t.target,null);a=[t.target.id,parseInt(e.getPropertyValue("left"),10)-t.clientX,parseInt(e.getPropertyValue("top"),10)-t.clientY],t.dataTransfer.setData("text/plain",a)}function n(t){var e=document.getElementById(a[0]);return e.style.left=100*(t.clientX+parseInt(a[1],10))/d+"%",e.style.top=100*(t.clientY+parseInt(a[2],10))/i+"%",t.preventDefault(),!1}function r(t){var e=document.getElementById(a[0]);e.style.left=100*(t.clientX+parseInt(a[1],10))/d+"%",e.style.top=100*(t.clientY+parseInt(a[2],10))/i+"%";for(var n=0;n<l.length;n++)l[n].name==a[0]&&(l[n].posX=e.style.left,l[n].posY=e.style.top,l[n].colour=e.dataset.colour,console.log(l[n].getInfo()));return o(),t.preventDefault(),!1}function o(){for(var t=[],e=0;e<l.length;e++)t.push("radial-gradient(circle at "+l[e].posX+" "+l[e].posY+", "+l[e].colour+", transparent 100%)");t.push("radial-gradient(circle at 50% 50%, #000, #000 100%)"),s.style.background=t.toString()}var a,s=document.getElementById("div"),l=[],d=s.offsetWidth,i=s.offsetHeight,u=document.getElementById("add_point"),c=document.getElementById("set_colour");[].forEach.call(document.querySelectorAll(".dragme"),function(n){n.addEventListener("dragstart",e,!1),l.push(new t(n.id,n.offsetLeft+"px",n.offsetTop+"px","green"))}),t.prototype.getInfo=function(){return this.name+" ("+this.posX+","+this.posY+") - "+this.colour},window.onresize=function(){d=s.offsetWidth,i=s.offsetHeight},u.onclick=function(){var n=document.createElement("span");n.setAttribute("draggable","true");var r=l[l.length-1].name;r=r.replace("d",""),newN=parseInt(r)+1,n.setAttribute("id","d"+newN),n.setAttribute("class","dragme");var o=""!=c.value?c.value:"blue";n.setAttribute("data-colour",o),s.appendChild(n),n.addEventListener("dragstart",e,!1),l.push(new t(n.id,n.offsetLeft+"px",n.offsetTop+"px","green"))},s.addEventListener("dragover",n,!1),s.addEventListener("drop",r,!1)});